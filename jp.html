<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Japanese Learning Cards</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  .card {
    @apply flex flex-col items-center justify-center bg-white rounded-lg shadow p-4 m-2 w-40 h-40 cursor-pointer transition-transform transform hover:scale-105;
  }
  .emoji {
    @apply text-6xl mb-2;
  }
  .name {
    @apply text-lg font-semibold;
  }
  .japanese {
    @apply text-sm text-gray-600;
  }
  .category {
    @apply text-2xl font-bold text-indigo-700 mt-6 mb-2;
  }
</style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
<div class="container mx-auto px-4 py-6">
  <header class="text-center mb-6">
    <h1 class="text-4xl font-bold text-indigo-700 mb-2">Japanese Learning Cards</h1>
    <p class="text-gray-600">Click a card to hear pronunciation</p>
  </header>

  <div id="cardsContainer"></div>
</div>

<script>
// 异步加载 JSON 数据
async function loadCategories() {
  try {
    const response = await fetch('categories.json'); // 确保 JSON 文件和 HTML 同目录
    const categories = await response.json();
    renderCards(categories);
  } catch (err) {
    console.error("Failed to load categories.json:", err);
  }
}

function renderCards(categories) {
  const container = document.getElementById('cardsContainer');

  for (const [category, items] of Object.entries(categories)) {
    // 类别标题
    const catTitle = document.createElement('div');
    catTitle.className = "category";
    catTitle.textContent = category;
    container.appendChild(catTitle);

    // 网格容器
    const catGrid = document.createElement('div');
    catGrid.className = "grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-4";
    container.appendChild(catGrid);

    items.forEach(item => {
      const card = document.createElement('div');
      card.className = "card";

      const emoji = document.createElement('div');
      emoji.className = "emoji";
      emoji.textContent = item.emoji || '❓';
      card.appendChild(emoji);

      const name = document.createElement('div');
      name.className = "name";
      name.textContent = item.name;
      card.appendChild(name);

      const japanese = document.createElement('div');
      japanese.className = "japanese";
      japanese.textContent = item.japanese;
      card.appendChild(japanese);

      // 点击发音
      card.addEventListener('click', () => {
        const utter = new SpeechSynthesisUtterance(item.japanese);
        utter.lang = 'ja-JP';
        speechSynthesis.speak(utter);
      });

      catGrid.appendChild(card);
    });
  }
}

// 页面加载后执行
loadCategories();
</script>
</body>
</html>
