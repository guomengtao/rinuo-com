<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API手册 - 开发者资源导航</title>
  
  <!-- 外部资源引入 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="assets/js/email-subscription.js"></script>
  
  <!-- Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            dark: '#1D2129',
            light: '#F2F3F5',
            muted: '#86909C',
            success: '#00B42A',
            warning: '#FF7D00',
            danger: '#F53F3F',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 自定义样式 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .sidebar-item {
        @apply flex items-center px-4 py-3 text-sm font-medium text-gray-600 hover:text-primary hover:bg-primary/5 rounded-lg transition-all duration-200 cursor-pointer;
      }
      .sidebar-item.active {
        @apply text-primary bg-primary/10 border-r-2 border-primary;
      }
      .api-card {
        @apply bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-all duration-300;
      }
      .method-badge {
        @apply inline-flex items-center px-2 py-1 rounded text-xs font-medium;
      }
      .method-get { @apply bg-green-100 text-green-800; }
      .method-post { @apply bg-blue-100 text-blue-800; }
      .method-put { @apply bg-yellow-100 text-yellow-800; }
      .method-delete { @apply bg-red-100 text-red-800; }
      .free-badge { @apply bg-success/10 text-success; }
      .paid-badge { @apply bg-warning/10 text-warning; }
    }
  </style>
</head>

<body class="font-inter bg-gray-50 text-dark min-h-screen">
  <!-- 顶部导航栏 -->
  <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <!-- Logo区域 -->
      <a href="index.html" class="flex items-center space-x-2">
        <i class="fa fa-compass text-primary text-2xl"></i>
        <h1 class="text-xl md:text-2xl font-bold text-primary">资源导航</h1>
      </a>
      
      <!-- 桌面端导航 -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="index.html" class="text-dark hover:text-primary transition-colors">首页</a>
        <a href="free/index.html" class="text-dark hover:text-primary transition-colors">资源分类</a>
        <a href="sitemap.html" class="text-dark hover:text-primary transition-colors">网站地图</a>
        <a href="#" class="text-primary font-medium">API手册</a>
        <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="text-muted hover:text-primary transition-colors flex items-center">
          <i class="fa fa-github mr-1"></i> 提交资源
        </a>
        
        <!-- 暗黑模式切换按钮 -->
        <button id="darkModeToggle" class="p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
          <i class="fa fa-moon-o text-gray-600" id="darkModeIcon"></i>
        </button>
      </div>
      
      <!-- 移动端菜单按钮 -->
      <button class="md:hidden text-dark focus:outline-none" id="menuBtn">
        <i class="fa fa-bars text-xl"></i>
      </button>
    </div>
    
    <!-- 移动端导航菜单 -->
    <div class="md:hidden hidden bg-white border-t border-gray-100" id="mobileMenu">
      <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
        <a href="index.html" class="py-2 text-dark hover:text-primary transition-colors">首页</a>
        <a href="free/index.html" class="py-2 text-dark hover:text-primary transition-colors">资源分类</a>
        <a href="sitemap.html" class="py-2 text-dark hover:text-primary transition-colors">网站地图</a>
        <a href="#" class="py-2 text-primary font-medium">API手册</a>
        <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="py-2 text-muted hover:text-primary transition-colors flex items-center">
          <i class="fa fa-github mr-1"></i> 提交资源
        </a>
        
        <!-- 移动端暗黑模式切换 -->
        <button id="mobileDarkModeToggle" class="py-2 text-left flex items-center text-dark hover:text-primary transition-colors">
          <i class="fa fa-moon-o mr-2"></i> 切换暗黑模式
        </button>
      </div>
    </div>
  </header>

  <!-- 页面标题区 -->
  <section class="bg-gradient-to-r from-primary to-secondary text-white py-12">
    <div class="container mx-auto px-4 text-center">
      <div class="flex items-center justify-center space-x-3 mb-4">
        <i class="fa fa-code text-4xl"></i>
        <h2 class="text-3xl md:text-4xl font-bold">API手册</h2>
      </div>
      <p class="text-xl text-white/90 max-w-3xl mx-auto">
        精选各类免费API接口，提供详细的接口文档、使用示例和SDK库，助力开发者快速集成第三方服务
      </p>
      <div class="flex flex-wrap justify-center gap-4 mt-6">
        <div class="bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2">
          <span class="font-medium">13个分类</span>
        </div>
        <div class="bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2">
          <span class="font-medium">100+ API接口</span>
        </div>
        <div class="bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2">
          <span class="font-medium">免费使用</span>
        </div>
      </div>
    </div>
  </section>

  <!-- 主要内容区 -->
  <div class="container mx-auto px-4 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      
      <!-- 左侧分类导航 -->
      <div class="lg:w-80 flex-shrink-0">
        <div class="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
          <h3 class="text-lg font-bold mb-4 text-gray-800">API分类</h3>
          
          <!-- 搜索框 -->
          <div class="mb-6">
            <div class="relative">
              <input type="text" id="categorySearch" placeholder="搜索分类..." 
                     class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary">
              <i class="fa fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
          </div>
          
          <!-- 分类列表 -->
          <div class="space-y-2" id="categoryList">
            <!-- 分类项将通过JavaScript动态生成 -->
          </div>
        </div>
      </div>
      
      <!-- 右侧API详情 -->
      <div class="flex-1">
        <!-- 当前分类信息 -->
        <div id="currentCategory" class="mb-8">
          <div class="text-center py-12">
            <i class="fa fa-code text-6xl text-gray-300 mb-4"></i>
            <h3 class="text-xl font-medium text-gray-500">请选择左侧分类查看API详情</h3>
            <p class="text-gray-400 mt-2">点击左侧分类导航，查看该分类下的所有API接口</p>
          </div>
        </div>
        
        <!-- API列表 -->
        <div id="apiList" class="space-y-6">
          <!-- API卡片将通过JavaScript动态生成 -->
        </div>
      </div>
    </div>
  </div>

  <!-- 页脚 -->
  <footer class="bg-dark text-white py-10 mt-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- 品牌信息 -->
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <i class="fa fa-compass text-secondary text-2xl"></i>
            <h3 class="text-xl font-bold">资源导航</h3>
          </div>
          <p class="text-gray-400 mb-4">
            为开发者提供精选免费资源导航，覆盖域名、服务器、API、工具等全品类需求，助力项目开发与创新
          </p>
          <div class="flex space-x-4">
            <a href="https://github.com/guomengtao/rinuo.com" target="_blank" class="text-gray-400 hover:text-secondary transition-colors">
              <i class="fa fa-github text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-secondary transition-colors">
              <i class="fa fa-twitter text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-secondary transition-colors">
              <i class="fa fa-linkedin text-xl"></i>
            </a>
          </div>
        </div>
        
        <!-- 快速链接 -->
        <div>
          <h4 class="text-lg font-medium mb-4">快速链接</h4>
          <ul class="space-y-2">
            <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors">首页</a></li>
            <li><a href="free/index.html" class="text-gray-400 hover:text-white transition-colors">资源分类</a></li>
            <li><a href="sitemap.html" class="text-gray-400 hover:text-white transition-colors">网站地图</a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors">API手册</a></li>
            <li>
              <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="text-gray-400 hover:text-white transition-colors flex items-center">
                <i class="fa fa-github mr-1"></i> 提交资源
              </a>
            </li>
          </ul>
        </div>
        
        <!-- 订阅更新 -->
        <div>
          <h4 class="text-lg font-medium mb-4">订阅资源更新</h4>
          <p class="text-gray-400 mb-4">获取最新免费资源信息和使用教程</p>
          <form class="flex flex-col sm:flex-row gap-2">
            <input type="email" placeholder="输入你的邮箱" class="flex-grow px-4 py-2 rounded-lg focus:outline-none text-dark" required>
            <button type="submit" class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-lg transition-colors whitespace-nowrap">
              立即订阅
            </button>
          </form>
        </div>
      </div>
      
      <!-- 版权信息 -->
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500 text-sm">
        <p>© 2025 开发者资源导航 | 本站资源仅供学习使用，版权归原作者所有</p>
        <p class="mt-2">本页面最后更新时间：2025-01-20</p>
      </div>
    </div>
  </footer>

  <!-- 回到顶部按钮 -->
  <button id="backToTop" class="fixed bottom-6 right-6 bg-primary hover:bg-primary/90 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 opacity-0 invisible">
    <i class="fa fa-chevron-up"></i>
  </button>

  <!-- JavaScript -->
  <script>
    // 暗黑模式功能
    function initDarkMode() {
      const darkModeToggle = document.getElementById('darkModeToggle');
      const mobileDarkModeToggle = document.getElementById('mobileDarkModeToggle');
      const darkModeIcon = document.getElementById('darkModeIcon');
      
      // 检查本地存储
      const isDarkMode = localStorage.getItem('darkMode') === 'true';
      if (isDarkMode) {
        document.documentElement.classList.add('dark');
        darkModeIcon.className = 'fa fa-sun-o text-yellow-500';
      }
      
      function toggleDarkMode() {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('darkMode', isDark);
        
        if (isDark) {
          darkModeIcon.className = 'fa fa-sun-o text-yellow-500';
        } else {
          darkModeIcon.className = 'fa fa-moon-o text-gray-600';
        }
      }
      
      darkModeToggle.addEventListener('click', toggleDarkMode);
      mobileDarkModeToggle.addEventListener('click', toggleDarkMode);
    }

    // 移动端菜单
    function initMobileMenu() {
      const menuBtn = document.getElementById('menuBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      
      menuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });
    }

    // 回到顶部
    function initBackToTop() {
      const backToTopBtn = document.getElementById('backToTop');
      
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backToTopBtn.classList.remove('opacity-0', 'invisible');
          backToTopBtn.classList.add('opacity-100', 'visible');
        } else {
          backToTopBtn.classList.add('opacity-0', 'invisible');
          backToTopBtn.classList.remove('opacity-100', 'visible');
        }
      });
      
      backToTopBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    }

    // API分类数据
    const apiCategories = [
      {
        id: 'weather',
        name: '天气服务',
        icon: 'fa-cloud',
        description: '全球天气信息查询、天气预报、空气质量等',
        count: 8
      },
      {
        id: 'vps',
        name: 'VPS服务',
        icon: 'fa-server',
        description: '云服务器、虚拟私有服务器等基础设施服务',
        count: 10
      },
      {
        id: 'ai',
        name: 'AI服务',
        icon: 'fa-brain',
        description: '人工智能、机器学习、自然语言处理等',
        count: 12
      },
      {
        id: 'database',
        name: '数据库服务',
        icon: 'fa-database',
        description: '各种数据库服务、云数据库、数据库管理工具',
        count: 10
      },
      {
        id: 'payment',
        name: '支付服务',
        icon: 'fa-credit-card',
        description: '在线支付、数字货币、支付网关等',
        count: 8
      },
      {
        id: 'email',
        name: '邮件服务',
        icon: 'fa-envelope',
        description: '邮件发送、邮件营销、邮件验证等',
        count: 6
      },
      {
        id: 'sms',
        name: '短信服务',
        icon: 'fa-mobile',
        description: '短信发送、短信验证、短信营销等',
        count: 5
      },
      {
        id: 'storage',
        name: '存储服务',
        icon: 'fa-cloud-upload',
        description: '云存储、文件存储、对象存储等',
        count: 7
      },
      {
        id: 'cdn',
        name: 'CDN服务',
        icon: 'fa-globe',
        description: '内容分发网络、加速服务等',
        count: 6
      },
      {
        id: 'monitor',
        name: '监控服务',
        icon: 'fa-eye',
        description: '网站监控、服务器监控、性能监控等',
        count: 5
      },
      {
        id: 'translate',
        name: '翻译服务',
        icon: 'fa-language',
        description: '多语言翻译、文本翻译等',
        count: 4
      },
      {
        id: 'ocr',
        name: 'OCR服务',
        icon: 'fa-file-text-o',
        description: '文字识别、图像识别等',
        count: 3
      },
      {
        id: 'blockchain',
        name: '区块链服务',
        icon: 'fa-link',
        description: '区块链API、加密货币、智能合约等',
        count: 4
      }
    ];

    // 渲染分类列表
    function renderCategories() {
      const categoryList = document.getElementById('categoryList');
      categoryList.innerHTML = apiCategories.map(category => `
        <div class="sidebar-item" data-category="${category.id}">
          <i class="${category.icon} mr-3 text-gray-500"></i>
          <div class="flex-1">
            <div class="font-medium">${category.name}</div>
            <div class="text-xs text-gray-400">${category.count}个API</div>
          </div>
        </div>
      `).join('');
      
      // 添加点击事件
      categoryList.querySelectorAll('.sidebar-item').forEach(item => {
        item.addEventListener('click', () => {
          // 移除其他active状态
          document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
          // 添加当前active状态
          item.classList.add('active');
          
          // 加载API数据
          loadApiData(item.dataset.category);
        });
      });
    }

    // 加载API数据
    async function loadApiData(categoryId) {
      try {
        const response = await fetch(`assets/data/${categoryId}.json`);
        if (!response.ok) {
          throw new Error('API数据加载失败');
        }
        
        const data = await response.json();
        displayApiData(data);
      } catch (error) {
        console.error('加载API数据失败:', error);
        // 显示错误信息
        document.getElementById('currentCategory').innerHTML = `
          <div class="text-center py-12">
            <i class="fa fa-exclamation-triangle text-6xl text-red-300 mb-4"></i>
            <h3 class="text-xl font-medium text-red-500">数据加载失败</h3>
            <p class="text-red-400 mt-2">无法加载 ${categoryId} 分类的API数据</p>
          </div>
        `;
        document.getElementById('apiList').innerHTML = '';
      }
    }

    // 显示API数据
    function displayApiData(data) {
      // 显示分类信息
      document.getElementById('currentCategory').innerHTML = `
        <div class="bg-white rounded-xl border border-gray-200 p-6">
          <div class="flex items-center space-x-4 mb-4">
            <div class="bg-primary/10 p-3 rounded-lg">
              <i class="fa fa-code text-primary text-2xl"></i>
            </div>
            <div>
              <h3 class="text-2xl font-bold text-gray-800">${data.category}</h3>
              <p class="text-gray-600">${data.description}</p>
            </div>
          </div>
          <div class="flex flex-wrap gap-4 text-sm text-gray-500">
            <span><i class="fa fa-code mr-1"></i>版本: ${data.version}</span>
            <span><i class="fa fa-calendar mr-1"></i>更新: ${data.last_updated}</span>
            <span><i class="fa fa-plug mr-1"></i>API数量: ${data.total_apis}</span>
          </div>
        </div>
      `;
      
      // 显示API列表
      const apiList = document.getElementById('apiList');
      apiList.innerHTML = data.apis.map(api => `
        <div class="api-card">
          <div class="flex items-start justify-between mb-4">
            <div class="flex-1">
              <h4 class="text-xl font-bold text-gray-800 mb-2">${api.name}</h4>
              <p class="text-gray-600 mb-3">${api.description}</p>
              <div class="flex flex-wrap gap-2 mb-3">
                ${api.tags.map(tag => `<span class="bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs">${tag}</span>`).join('')}
              </div>
            </div>
            <div class="flex flex-col items-end space-y-2">
              <span class="method-badge method-${api.method.toLowerCase().split('/')[0]}">${api.method}</span>
              <span class="${api.is_free ? 'free-badge' : 'paid-badge'} px-2 py-1 rounded text-xs">
                ${api.is_free ? '免费' : '付费'}
              </span>
            </div>
          </div>
          
          <div class="space-y-3">
            <div>
              <label class="text-sm font-medium text-gray-700">接口地址:</label>
              <div class="bg-gray-50 p-3 rounded-lg font-mono text-sm break-all">${api.endpoint}</div>
            </div>
            
            <div>
              <label class="text-sm font-medium text-gray-700">参数说明:</label>
              <div class="bg-gray-50 p-3 rounded-lg">
                ${Object.entries(api.parameters).map(([key, desc]) => 
                  `<div class="text-sm"><span class="font-mono text-primary">${key}</span>: ${desc}</div>`
                ).join('')}
              </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div>
                <span class="font-medium text-gray-700">响应格式:</span>
                <span class="ml-2 text-gray-600">${api.response_format}</span>
              </div>
              <div>
                <span class="font-medium text-gray-700">频率限制:</span>
                <span class="ml-2 text-gray-600">${api.rate_limit}</span>
              </div>
            </div>
            
            <div class="flex space-x-3">
              <a href="${api.documentation}" target="_blank" 
                 class="inline-flex items-center px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-lg transition-colors text-sm">
                <i class="fa fa-book mr-2"></i>查看文档
              </a>
              <button onclick="copyEndpoint('${api.endpoint}')" 
                      class="inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors text-sm">
                <i class="fa fa-copy mr-2"></i>复制地址
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    // 复制接口地址
    function copyEndpoint(endpoint) {
      navigator.clipboard.writeText(endpoint).then(() => {
        // 显示复制成功提示
        const button = event.target.closest('button');
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fa fa-check mr-2"></i>已复制';
        button.classList.remove('bg-gray-100', 'hover:bg-gray-200');
        button.classList.add('bg-green-100', 'text-green-700');
        
        setTimeout(() => {
          button.innerHTML = originalText;
          button.classList.remove('bg-green-100', 'text-green-700');
          button.classList.add('bg-gray-100', 'hover:bg-gray-200');
        }, 2000);
      });
    }

    // 分类搜索功能
    function initSearch() {
      const searchInput = document.getElementById('categorySearch');
      searchInput.addEventListener('input', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const categoryItems = document.querySelectorAll('.sidebar-item');
        
        categoryItems.forEach(item => {
          const categoryName = item.textContent.toLowerCase();
          if (categoryName.includes(searchTerm)) {
            item.style.display = 'block';
          } else {
            item.style.display = 'none';
          }
        });
      });
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', () => {
      initDarkMode();
      initMobileMenu();
      initBackToTop();
      renderCategories();
      initSearch();
      
      // 默认选中第一个分类
      const firstCategory = document.querySelector('.sidebar-item');
      if (firstCategory) {
        firstCategory.click();
      }
    });
  </script>
</body>
</html>
