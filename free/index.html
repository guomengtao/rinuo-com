<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>免费资源总览 | 统一风格版</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind配置 - 与参考文件保持一致的色彩系统 -->
  <script>
    tailwind.config = {
      theme: {
          extend: {
              colors: {
                  primary: '#165DFF',      // 主色调：科技蓝
                  secondary: '#4080FF',    // 辅助色：浅蓝色
                  dark: '#1D2129',         // 文字深灰
                  light: '#F2F3F5',        // 背景浅灰
                  muted: '#86909C',        // 辅助文字灰
                  success: '#00B42A',      // 成功色：绿色
                  warning: '#FF7D00',      // 警告色：橙色
                  danger: '#F53F3F',       // 危险色：红色
                  // 服务类型颜色
                  vps: '#0FC6C2',          // VPS：青色
                  cloud: '#722ED1',        // 云服务器：紫色
                  hosting: '#FF7D00',      // 虚拟主机：橙色
                  serverless: '#00B42A',   // Serverless：绿色
                  trial: '#F53F3F',        // 试用：红色
                  free: '#165DFF'          // 永久免费：主色
              },
              fontFamily: {
                  inter: ['Inter', 'system-ui', 'sans-serif'],
              },
          }
      }
    };
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .hover-highlight {
        @apply transition-all duration-300 hover:bg-primary/5;
      }
      .card-hover {
        @apply transition-all duration-300 hover:shadow-lg hover:border-primary/30 hover:-translate-y-1;
      }
      .text-balance {
        text-wrap: balance;
      }
      .sidebar-scroll {
        max-height: calc(100vh - 14rem);
        overflow-y: auto;
        scrollbar-width: thin;
      }
      .sidebar-scroll::-webkit-scrollbar {
        width: 4px;
      }
      .sidebar-scroll::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }
      .sidebar-scroll::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
      }
      .sidebar-scroll::-webkit-scrollbar-thumb:hover {
        background: #a1a1a1;
      }
    }
  </style>
</head>

<body class="font-inter bg-gray-50 text-dark min-h-screen flex flex-col">
  <!-- 顶部导航栏 - 修正链接路径 -->
  <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <!-- Logo区域 -->
      <a href="../index.html" class="flex items-center space-x-2">
        <i class="fa fa-cloud-server text-primary text-2xl"></i>
        <h1 class="text-xl md:text-2xl font-bold text-primary">云服务资源导航</h1>
      </a>
      
      <!-- 桌面端导航 -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="../index.html" class="text-dark hover:text-primary transition-colors">首页</a>
        <a href="weather.html" class="text-dark hover:text-primary transition-colors">天气接口</a>
        <a href="ai.html" class="text-dark hover:text-primary transition-colors">AI接口</a>
        <a href="icons.html" class="text-dark hover:text-primary transition-colors">图标资源</a>
        <a href="index.html" class="text-primary font-medium">免费资源总览</a>
        <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="text-muted hover:text-primary transition-colors flex items-center">
          <i class="fa fa-github mr-1"></i> 贡献资源
        </a>
      </div>
      
      <!-- 移动端菜单按钮 -->
      <button class="md:hidden text-dark focus:outline-none" id="menuBtn">
        <i class="fa fa-bars text-xl"></i>
      </button>
    </div>
    
    <!-- 移动端导航菜单（默认隐藏） -->
    <div class="md:hidden hidden bg-white border-t border-gray-100" id="mobileMenu">
      <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
        <a href="../index.html" class="py-2 text-dark hover:text-primary transition-colors">首页</a>
        <a href="weather.html" class="py-2 text-dark hover:text-primary transition-colors">天气接口</a>
        <a href="ai.html" class="py-2 text-dark hover:text-primary transition-colors">AI接口</a>
        <a href="icons.html" class="py-2 text-dark hover:text-primary transition-colors">图标资源</a>
        <a href="index.html" class="py-2 text-primary font-medium">免费资源总览</a>
        <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="py-2 text-muted hover:text-primary transition-colors flex items-center">
          <i class="fa fa-github mr-1"></i> 贡献资源
        </a>
      </div>
    </div>
  </header>

  <!-- 页面标题区 - 与参考文件保持一致的风格 -->
  <section class="bg-gradient-to-r from-primary to-blue-600 text-white py-10 md:py-16">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
        <div>
          <div class="flex items-center space-x-3 mb-4">
            <i class="fa fa-th-large text-3xl"></i>
            <h2 class="text-[clamp(1.5rem,4vw,2.5rem)] font-bold">免费资源总览</h2>
          </div>
          <p class="text-white/90 max-w-2xl text-balance">
            精选各类免费开发资源，涵盖CDN服务、地图API、翻译工具、图标资源等多个领域，帮助开发者降低项目成本，提高开发效率
          </p>
          
          <div class="flex flex-wrap gap-3 mt-6">
            <a href="#resources" class="inline-flex items-center bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors">
              <i class="fa fa-list-alt mr-2"></i> 浏览所有资源
            </a>
            <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="inline-flex items-center bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors">
              <i class="fa fa-plus-circle mr-2"></i> 提交新资源
            </a>
          </div>
        </div>
        
        <!-- 数据概览卡片 - 与参考文件风格一致 -->
        <div class="bg-white/15 backdrop-blur-sm rounded-lg p-5 flex flex-col space-y-4 max-w-xs">
          <div class="flex justify-between items-center">
            <span class="text-white/80">收录资源</span>
            <span class="font-bold" id="totalResources">0</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-white/80">资源分类</span>
            <span class="font-bold" id="totalCategories">0</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-white/80">永久免费</span>
            <span class="font-bold" id="permanentFree">0</span>
          </div>
          <div class="flex justify-between items-center">
            <span class="text-white/80">开源项目</span>
            <span class="font-bold" id="openSourceCount">0</span>
          </div>
          <div class="border-t border-white/20 pt-4 mt-2">
            <span class="text-white/90 text-sm">最后更新：<span id="lastUpdated">--</span></span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 面包屑导航 - 与参考文件保持一致 -->
  <div class="container mx-auto px-4 py-4 bg-white shadow-sm">
    <nav class="flex text-sm" aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-3">
        <li class="inline-flex items-center">
          <a href="../index.html" class="inline-flex items-center text-muted hover:text-primary transition-colors">
            <i class="fa fa-home mr-2"></i>首页
          </a>
        </li>
        <li>
          <div class="flex items-center">
            <i class="fa fa-chevron-right text-muted mx-2 text-xs"></i>
            <a href="index.html" class="text-primary font-medium">免费资源总览</a>
          </div>
        </li>
      </ol>
    </nav>
  </div>

  <!-- 主内容区 -->
  <main class="container mx-auto px-4 py-8 flex-grow">
    <div class="flex flex-col md:flex-row gap-6">
      <!-- 侧边栏 - 仅一级分类，添加滚动功能 -->
      <aside class="w-full md:w-64 shrink-0">
        <div class="bg-white rounded-xl border border-gray-100 p-4 sticky top-20 shadow-sm">
          <h2 class="font-medium text-dark mb-3">资源分类</h2>
          <nav id="sidebarNav" class="mb-4 text-sm sidebar-scroll">
            <div class="flex justify-center py-4">
              <div class="animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-primary"></div>
            </div>
          </nav>
          
          <!-- 筛选区域 -->
          <div class="border-t border-gray-100 pt-3 mt-3">
            <div class="space-y-2 mb-3">
              <label class="flex items-center space-x-2 cursor-pointer text-xs">
                <input type="checkbox" id="onlyFree" class="rounded text-primary text-xs">
                <span>仅永久免费</span>
              </label>
              <label class="flex items-center space-x-2 cursor-pointer text-xs">
                <input type="checkbox" id="openSource" class="rounded text-primary text-xs">
                <span>开源项目</span>
              </label>
            </div>
            
            <select id="sortSelect" class="w-full border border-gray-200 rounded p-1.5 text-xs">
              <option value="popular">按热度</option>
              <option value="updated">按更新</option>
              <option value="alpha">按名称</option>
            </select>
          </div>
        </div>
      </aside>

      <!-- 主内容 - 仅一级分类 -->
      <div class="flex-1">
        <!-- 简介卡片 - 与参考文件风格一致 -->
        <div class="bg-white rounded-xl border border-gray-100 p-5 md:p-6 mb-8 shadow-sm">
          <div class="flex items-start">
            <div class="flex-shrink-0 bg-primary/10 p-3 rounded-lg mr-4">
              <i class="fa fa-info-circle text-primary text-xl"></i>
            </div>
            <div>
              <h3 class="text-xl font-bold mb-3">关于免费资源导航</h3>
              <p class="text-muted mb-4">
                本页面汇总了各类免费开发资源，包括CDN服务、地图API、翻译工具、图标资源、图片服务等多个领域。所有资源均经过筛选，标注了是否永久免费和是否开源，帮助开发者快速找到适合项目需求的免费资源。
              </p>
              <div class="flex flex-wrap gap-2">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">开发工具</span>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">API服务</span>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">资源素材</span>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">云服务</span>
              </div>
            </div>
          </div>
        </div>

        <!-- 资源内容区 -->
        <div id="sections" class="bg-white rounded-xl border border-gray-100 p-5 md:p-6 shadow-sm" id="resources">
          <div class="flex justify-center py-8">
            <div class="animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-primary"></div>
          </div>
        </div>

        <!-- 资源贡献区域 - 与参考文件风格一致 -->
        <div class="bg-white rounded-xl border border-gray-100 p-5 md:p-6 mt-8 shadow-sm">
          <h3 class="text-xl font-bold mb-4 flex items-center">
            <i class="fa fa-github text-primary mr-2"></i>贡献资源
          </h3>
          <p class="text-muted mb-4">
            知道更多优质的免费资源？欢迎通过GitHub提交补充内容，帮助更多开发者！
          </p>
          <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="inline-flex items-center bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-colors">
            <i class="fa fa-github mr-2"></i> 提交issue
          </a>
        </div>
      </div>
    </div>
  </main>

  <!-- 页脚 - 修正链接路径 -->
  <footer class="bg-dark text-white py-10 mt-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <i class="fa fa-cloud-server text-primary text-2xl"></i>
            <h2 class="text-xl font-bold text-white">云服务资源导航</h2>
          </div>
          <p class="text-gray-400 text-sm">
            精选全球优质免费开发资源，涵盖各类API、工具和服务，详细对比各平台的免费额度、使用限制和适用场景，帮助开发者找到适合的免费资源解决方案。
          </p>
        </div>
        
        <div>
          <h3 class="text-lg font-medium mb-4">资源分类</h3>
          <ul class="space-y-2 text-gray-400">
            <li><a href="cdn.html" class="hover:text-primary transition-colors">CDN服务</a></li>
            <li><a href="map.html" class="hover:text-primary transition-colors">地图API</a></li>
            <li><a href="translate.html" class="hover:text-primary transition-colors">翻译工具</a></li>
            <li><a href="icons.html" class="hover:text-primary transition-colors">图标资源</a></li>
            <li><a href="image.html" class="hover:text-primary transition-colors">图片服务</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-medium mb-4">相关链接</h3>
          <ul class="space-y-2 text-gray-400">
            <li><a href="../index.html" class="hover:text-primary transition-colors">首页</a></li>
            <li><a href="weather.html" class="hover:text-primary transition-colors">天气接口</a></li>
            <li><a href="ai.html" class="hover:text-primary transition-colors">AI接口资源</a></li>
            <li><a href="vps.html" class="hover:text-primary transition-colors">免费云服务</a></li>
            <li><a href="https://github.com/guomengtao/rinuo.com" target="_blank" class="hover:text-primary transition-colors">提交资源</a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-medium mb-4">关注我们</h3>
          <div class="flex space-x-4">
            <a href="https://github.com/guomengtao/rinuo.com" target="_blank" class="text-gray-400 hover:text-primary transition-colors text-xl">
              <i class="fa fa-github"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary transition-colors text-xl">
              <i class="fa fa-twitter"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-primary transition-colors text-xl">
              <i class="fa fa-linkedin"></i>
            </a>
          </div>
          <p class="text-gray-400 text-sm mt-4">
            订阅更新，获取最新免费资源信息
          </p>
          <div class="mt-2 flex" id="subscriptionForm">
            <input type="email" placeholder="您的邮箱地址" class="px-3 py-2 rounded-l-lg text-dark flex-grow text-sm focus:outline-none" id="emailInput">
            <button class="bg-primary hover:bg-primary/90 text-white px-3 py-2 rounded-r-lg transition-colors" id="subscribeBtn">
              订阅
            </button>
          </div>
          <div id="subscriptionMessage" class="mt-2 text-xs hidden"></div>
        </div>
      </div>
      
      <div class="border-t border-gray-800 mt-8 pt-6 text-center text-gray-500 text-sm">
        <p>© 2025 云服务资源导航. 保留所有权利.</p>
      </div>
    </div>
  </footer>

  <!-- 回到顶部按钮 - 与参考文件一致 -->
  <button id="backToTop" class="fixed bottom-6 right-6 bg-primary hover:bg-primary/90 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 opacity-0 invisible">
    <i class="fa fa-chevron-up"></i>
  </button>

  <script>
    // 清单文件路径 - 数据直接嵌入，无需外部JSON
    const SUMMARY_FILE = null; // 不再需要外部JSON文件
    
    const navEl = document.getElementById('sidebarNav');
    const sectionsEl = document.getElementById('sections');
    const onlyFreeEl = document.getElementById('onlyFree');
    const openSourceEl = document.getElementById('openSource');
    const sortSelectEl = document.getElementById('sortSelect');
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const totalResourcesEl = document.getElementById('totalResources');
    const totalCategoriesEl = document.getElementById('totalCategories');
    const permanentFreeEl = document.getElementById('permanentFree');
    const openSourceCountEl = document.getElementById('openSourceCount');
    const lastUpdatedEl = document.getElementById('lastUpdated');
    const backToTopBtn = document.getElementById('backToTop');
    const subscribeBtn = document.getElementById('subscribeBtn');
    const emailInput = document.getElementById('emailInput');
    const subscriptionMessage = document.getElementById('subscriptionMessage');

    // 移动端菜单切换
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    // 回到顶部按钮
    window.addEventListener('scroll', () => {
      // 显示/隐藏回到顶部按钮
      if (window.scrollY > 300) {
        backToTopBtn.classList.remove('opacity-0', 'invisible');
        backToTopBtn.classList.add('opacity-100', 'visible');
      } else {
        backToTopBtn.classList.add('opacity-0', 'invisible');
        backToTopBtn.classList.remove('opacity-100', 'visible');
      }

      // 导航栏滚动效果
      const header = document.querySelector('header');
      if (window.scrollY > 50) {
        header.classList.add('py-2');
        header.classList.remove('py-4');
      } else {
        header.classList.add('py-4');
        header.classList.remove('py-2');
      }
    });

    // 回到顶部功能
    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // 平滑滚动到锚点
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        // 只处理页面内锚点，不处理外部链接
        if (this.getAttribute('href').startsWith('#') && this.getAttribute('href') !== '#') {
          e.preventDefault();
          
          const targetId = this.getAttribute('href');
          const targetElement = document.querySelector(targetId);
          
          if (targetElement) {
            window.scrollTo({
              top: targetElement.offsetTop - 100,
              behavior: 'smooth'
            });
            
            // 如果是移动端且菜单打开，则关闭菜单
            if (!mobileMenu.classList.contains('hidden')) {
              mobileMenu.classList.add('hidden');
            }
          }
        }
      });
    });

    // 订阅功能实现
    subscribeBtn.addEventListener('click', () => {
      const email = emailInput.value.trim();
      
      // 简单的邮箱验证
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      
      if (!email) {
        showSubscriptionMessage('请输入您的邮箱地址', 'error');
        return;
      }
      
      if (!emailRegex.test(email)) {
        showSubscriptionMessage('请输入有效的邮箱地址', 'error');
        return;
      }
      
      // 模拟API调用
      showSubscriptionMessage('正在订阅中...', 'info');
      
      // 模拟异步请求
      setTimeout(() => {
        // 这里应该是实际的API调用
        // 成功后：
        showSubscriptionMessage('订阅成功！我们会定期发送最新资源信息。', 'success');
        emailInput.value = '';
        
        // 实际应用中，这里应该发送请求到后端
        console.log(`订阅邮箱: ${email}`);
      }, 1500);
    });

    // 显示订阅消息
    function showSubscriptionMessage(text, type) {
      subscriptionMessage.textContent = text;
      subscriptionMessage.classList.remove('hidden', 'text-danger', 'text-success', 'text-primary');
      
      switch(type) {
        case 'error':
          subscriptionMessage.classList.add('text-danger');
          break;
        case 'success':
          subscriptionMessage.classList.add('text-success');
          break;
        default:
          subscriptionMessage.classList.add('text-primary');
      }
      
      // 5秒后自动隐藏成功消息
      if (type === 'success') {
        setTimeout(() => {
          subscriptionMessage.classList.add('hidden');
        }, 5000);
      }
    }

    // 1. 加载summary.json文件 - 数据直接嵌入，无需外部JSON
    async function loadSummaryData() {
      try {
        const startTime = performance.now();
        
        // 直接使用嵌入的数据，无需fetch
        const data = {
          "schemaVersion": 1,
          "type": "summary",
          "updatedAt": "2025-08-31",
          "totalServices": 870,
          "totalCategories": 40,
          "categories": [
            {"category": "域名服务", "categorySlug": "domain", "slug": "domain", "updatedAt": "2025-08-31", "serviceCount": 32},
            {"category": "OCR识别", "categorySlug": "ocr", "slug": "ocr", "updatedAt": "2025-08-31", "serviceCount": 26},
            {"category": "翻译服务", "categorySlug": "translate", "slug": "translate", "updatedAt": "2025-08-31", "serviceCount": 22},
            {"category": "法律工具", "categorySlug": "law", "slug": "law", "updatedAt": "2025-08-31", "serviceCount": 26},
            {"category": "监控服务", "categorySlug": "monitor", "slug": "monitor", "updatedAt": "2025-08-31", "serviceCount": 15},
            {"category": "API服务", "categorySlug": "api", "slug": "api", "updatedAt": "2025-08-31", "serviceCount": 24},
            {"category": "CI/CD工具", "categorySlug": "cicd", "slug": "cicd", "updatedAt": "2025-08-31", "serviceCount": 17},
            {"category": "图标资源", "categorySlug": "icons", "slug": "icons", "updatedAt": "2025-08-31", "serviceCount": 42},
            {"category": "股票数据", "categorySlug": "stock", "slug": "stock", "updatedAt": "2025-08-31", "serviceCount": 35},
            {"category": "OTP验证", "categorySlug": "otp", "slug": "otp", "updatedAt": "2025-08-31", "serviceCount": 21},
            {"category": "人工智能", "categorySlug": "ai", "slug": "ai", "updatedAt": "2025-08-31", "serviceCount": 26},
            {"category": "教育资源", "categorySlug": "education", "slug": "education", "updatedAt": "2025-08-31", "serviceCount": 18},
            {"category": "健康医疗", "categorySlug": "health", "slug": "health", "updatedAt": "2025-08-31", "serviceCount": 16},
            {"category": "日志分析", "categorySlug": "log", "slug": "log", "updatedAt": "2025-08-31", "serviceCount": 18},
            {"category": "AI文本", "categorySlug": "ai-text", "slug": "ai-text", "updatedAt": "2025-08-31", "serviceCount": 24},
            {"category": "VPS服务", "categorySlug": "vps", "slug": "vps", "updatedAt": "2025-08-31", "serviceCount": 38},
            {"category": "测试工具", "categorySlug": "test", "slug": "test", "updatedAt": "2025-08-31", "serviceCount": 12},
            {"category": "体育数据", "categorySlug": "sport", "slug": "sport", "updatedAt": "2025-08-31", "serviceCount": 18},
            {"category": "推送服务", "categorySlug": "push", "slug": "push", "updatedAt": "2025-08-31", "serviceCount": 22},
            {"category": "新闻资讯", "categorySlug": "news", "slug": "news", "updatedAt": "2025-08-31", "serviceCount": 25},
            {"category": "数据库", "categorySlug": "database", "slug": "database", "updatedAt": "2025-08-31", "serviceCount": 19},
            {"category": "支付服务", "categorySlug": "payment", "slug": "payment", "updatedAt": "2025-08-31", "serviceCount": 15},
            {"category": "短信服务", "categorySlug": "sms", "slug": "sms", "updatedAt": "2025-08-31", "serviceCount": 28},
            {"category": "开发工具", "categorySlug": "devtools", "slug": "devtools", "updatedAt": "2025-08-31", "serviceCount": 26},
            {"category": "视频处理", "categorySlug": "video", "slug": "video", "updatedAt": "2025-08-31", "serviceCount": 22},
            {"category": "邮件服务", "categorySlug": "email", "slug": "email", "updatedAt": "2025-08-31", "serviceCount": 24},
            {"category": "CDN服务", "categorySlug": "cdn", "slug": "cdn", "updatedAt": "2025-08-31", "serviceCount": 31},
            {"category": "Supabase", "categorySlug": "supabase", "slug": "supabase", "updatedAt": "2025-08-31", "serviceCount": 18},
            {"category": "字体资源", "categorySlug": "fonts", "slug": "fonts", "updatedAt": "2025-08-31", "serviceCount": 12},
            {"category": "存储服务", "categorySlug": "storage", "slug": "storage", "updatedAt": "2025-08-31", "serviceCount": 20},
            {"category": "图片处理", "categorySlug": "image", "slug": "image", "updatedAt": "2025-08-31", "serviceCount": 18},
            {"category": "语音服务", "categorySlug": "voice", "slug": "voice", "updatedAt": "2025-08-31", "serviceCount": 16},
            {"category": "地图服务", "categorySlug": "map", "slug": "map", "updatedAt": "2025-08-31", "serviceCount": 22},
            {"category": "AI图像", "categorySlug": "ai-image", "slug": "ai-image", "updatedAt": "2025-08-31", "serviceCount": 15},
            {"category": "Serverless", "categorySlug": "serverless", "slug": "serverless", "updatedAt": "2025-08-31", "serviceCount": 8},
            {"category": "使用指南", "categorySlug": "guide", "slug": "guide", "updatedAt": "2025-08-31", "serviceCount": 5},
            {"category": "日常工具", "categorySlug": "day", "slug": "day", "updatedAt": "2025-08-31", "serviceCount": 6}
          ],
          "services": [
            // 这里可以添加具体的服务数据，目前使用占位符
            {"id": "service-1", "title": "示例服务", "categorySlug": "domain", "isFree": true, "isOpenSource": false, "description": "这是一个示例服务描述"}
          ]
        };
        
        const endTime = performance.now();
        console.log(`数据加载完成，耗时: ${(endTime - startTime).toFixed(2)}ms`);
        
        return data;
      } catch (error) {
        console.error('汇总文件错误:', error);
        sectionsEl.innerHTML = '<div class="text-center py-4 text-red-500 text-sm">资源加载失败</div>';
        return null;
      }
    }

    // 2. 按分类组织服务数据
    function organizeServicesByCategory(services) {
      const categorized = {};
      
      services.forEach(service => {
        const category = service.categorySlug;
        if (!categorized[category]) {
          categorized[category] = [];
        }
        categorized[category].push(service);
      });
      
      return categorized;
    }

    // 3. 渲染左侧分类导航（点击滚动到对应内容）
    function renderSidebar(categories, categorizedServices) {
      navEl.innerHTML = '';
      const ul = document.createElement('ul');
      ul.className = 'space-y-1';
      
      let validCategoryCount = 0;
      let totalResourcesCount = 0;
      let permanentFreeCount = 0;
      let openSourceTotalCount = 0;

      // 计算统计数据
      categories.forEach(category => {
        const services = categorizedServices[category.slug] || [];
        if (services.length === 0) return;
        
        validCategoryCount++;
        totalResourcesCount += services.length;
        
        // 统计永久免费和开源项目总数
        services.forEach(item => {
          if (item.isFree) permanentFreeCount++;
          if (item.isOpenSource) openSourceTotalCount++;
        });

        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = `#${category.slug}`; // 链接到页面内锚点
        a.className = 'block px-2 py-1.5 rounded hover-highlight';
        a.textContent = `${category.category} (${services.length})`;
        li.appendChild(a);
        ul.appendChild(li);
      });

      // 更新统计数据
      totalResourcesEl.textContent = totalResourcesCount;
      totalCategoriesEl.textContent = validCategoryCount;
      permanentFreeEl.textContent = permanentFreeCount;
      openSourceCountEl.textContent = openSourceTotalCount;

      if (ul.children.length === 0) {
        navEl.innerHTML = '<div class="text-center py-2 text-gray-500 text-xs">无有效分类</div>';
        return;
      }

      navEl.appendChild(ul);
    }

    // 4. 渲染资源列表（按分类展示）
    function renderSections(categories, categorizedServices, summaryData) {
      sectionsEl.innerHTML = '';
      
      // 更新最后更新时间
      lastUpdatedEl.textContent = summaryData.updatedAt || '未知';

      categories.forEach(category => {
        const services = categorizedServices[category.slug] || [];
        if (services.length === 0) return;

        // 一级分类区块
        const mainSection = document.createElement('section');
        mainSection.id = category.slug;
        mainSection.className = 'py-6 border-b border-gray-100 last:border-0';

        // 一级分类标题
        const mainTitle = document.createElement('h2');
        mainTitle.className = 'text-xl font-semibold mb-4 flex items-baseline gap-2';
        mainTitle.innerHTML = `
          <span class="text-dark">
            ${category.category}
            <span class="ml-2 text-xs text-muted">${services.length}个资源</span>
          </span>
          <a href="#${category.slug}" class="text-muted hover:text-primary transition-colors">
            <i class="fa fa-link"></i>
          </a>
        `;
        mainSection.appendChild(mainTitle);

        // 资源列表
        const resourceList = document.createElement('ul');
        resourceList.className = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3';
        services.forEach(item => resourceList.appendChild(createResourceCard(item)));
        mainSection.appendChild(resourceList);

        sectionsEl.appendChild(mainSection);
      });

      // 无资源提示
      if (sectionsEl.children.length === 0) {
        sectionsEl.innerHTML = '<div class="text-center py-8 text-gray-500 text-sm">未找到可用资源</div>';
      }
    }

    // 5. 资源卡片 - 与参考文件风格一致
    function createResourceCard(item) {
      const li = document.createElement('li');
      li.className = 'bg-white border border-gray-100 rounded-lg p-3 card-hover';
      li.dataset.free = String(!!item.isFree);
      li.dataset.oss = String(!!item.isOpenSource);
      li.dataset.updated = item.updatedAt || '';
      
      // 资源标题和链接
      const titleLink = document.createElement('a');
      titleLink.href = item.url;
      titleLink.rel = 'nofollow';
      titleLink.target = '_blank'; // 新窗口打开
      titleLink.className = 'font-medium text-dark hover:text-primary transition-colors flex items-start justify-between mb-2';
      titleLink.textContent = item.title;
      
      // 标签容器
      const badgesContainer = document.createElement('div');
      badgesContainer.className = 'flex flex-wrap gap-1 mb-2';
      
      // 永久免费标签
      if (item.isFree) {
        const freeBadge = document.createElement('span');
        freeBadge.className = 'inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800';
        freeBadge.innerHTML = '<i class="fa fa-check-circle mr-1"></i>永久免费';
        badgesContainer.appendChild(freeBadge);
      }
      
      // 开源标签
      if (item.isOpenSource) {
        const ossBadge = document.createElement('span');
        ossBadge.className = 'inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800';
        ossBadge.innerHTML = '<i class="fa fa-code-fork mr-1"></i>开源';
        badgesContainer.appendChild(ossBadge);
      }
      
      // 资源描述
      const description = document.createElement('p');
      description.className = 'text-sm text-muted mb-3 line-clamp-2';
      description.textContent = item.description || '无描述信息';
      
      // 访问链接
      const visitLink = document.createElement('a');
      visitLink.href = item.url;
      visitLink.rel = 'nofollow';
      visitLink.target = '_blank';
      visitLink.className = 'text-primary hover:underline text-sm flex items-center';
      visitLink.textContent = '访问官网';
      visitLink.innerHTML += ' <i class="fa fa-external-link ml-1 text-xs"></i>';
      
      li.appendChild(titleLink);
      li.appendChild(badgesContainer);
      li.appendChild(description);
      li.appendChild(visitLink);
      
      return li;
    }

    // 6. 筛选与排序逻辑
    function applyFiltersAndSort() {
      const needFree = !!onlyFreeEl.checked;
      const needOSS = !!openSourceEl.checked;
      
      document.querySelectorAll('ul.grid').forEach(list => {
        const items = Array.from(list.children);
        
        // 筛选
        items.forEach(li => {
          const okFree = !needFree || li.dataset.free === 'true';
          const okOSS = !needOSS || li.dataset.oss === 'true';
          li.style.display = (okFree && okOSS) ? '' : 'none';
        });
        
        // 排序
        const mode = sortSelectEl.value;
        const visibleItems = items.filter(li => li.style.display !== 'none');
        
        visibleItems.sort((a, b) => {
          if (mode === 'updated') {
            return (b.dataset.updated || '').localeCompare(a.dataset.updated || '');
          }
          if (mode === 'alpha') {
            return a.querySelector('a').textContent.localeCompare(b.querySelector('a').textContent);
          }
          // 热度排序 - 基于服务描述长度简单模拟
          return b.querySelector('p').textContent.length - a.querySelector('p').textContent.length;
        });
        
        // 重新排列
        visibleItems.forEach(el => list.appendChild(el));
      });
    }

    // 7. 滚动监听（导航高亮）
    function setupScrollSpy() {
      const links = Array.from(document.querySelectorAll('#sidebarNav a[href^="#"]'));
      const targets = Array.from(document.querySelectorAll('main section[id]'));
      
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const targetId = entry.target.id;
            links.forEach(link => {
              const linkTarget = link.getAttribute('href').replace('#', '');
              link.classList.toggle('bg-primary/10', linkTarget === targetId);
              link.classList.toggle('text-primary', linkTarget === targetId);
            });
            history.replaceState(null, '', `#${targetId}`);
          }
        });
      }, { rootMargin: '-40% 0px -50% 0px', threshold: 0.1 });
      
      targets.forEach(target => observer.observe(target));
    }

    // 8. 初始化流程
    async function init() {
      const summaryData = await loadSummaryData();
      if (!summaryData) return;
      
      // 按分类组织服务
      const categorizedServices = organizeServicesByCategory(summaryData.services || []);
      
      // 渲染导航和内容
      renderSidebar(summaryData.categories || [], categorizedServices);
      renderSections(summaryData.categories || [], categorizedServices, summaryData);
      setupScrollSpy();
      
      // 绑定筛选事件
      ['change', 'input'].forEach(evt => {
        [onlyFreeEl, openSourceEl, sortSelectEl].forEach(el => {
          el && el.addEventListener(evt, applyFiltersAndSort);
        });
      });
      applyFiltersAndSort();
    }

    // 启动
    init();
  </script>
</body>
</html>
