<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>网站地图 | 开发者资源导航 - 免费工具与服务大全</title>
  <meta name="description" content="完整的开发者资源导航网站地图，包含所有分类、服务和工具，帮助您快速找到所需的免费开发资源。">
  
  <!-- 外部资源引入 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            dark: '#1D2129',
            light: '#F2F3F5',
            muted: '#86909C',
            success: '#00B42A',
            warning: '#FF7D00',
            info: '#165DFF',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- 自定义样式 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-hover {
        @apply transition-all duration-300 hover:shadow-lg hover:border-primary/30 hover:-translate-y-1;
      }
      .text-balance {
        text-wrap: balance;
      }
      .category-card {
        @apply bg-white rounded-xl border border-gray-100 p-6 shadow-sm hover:shadow-md transition-all duration-300;
      }
      .service-item {
        @apply flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors;
      }
      .search-highlight {
        @apply bg-yellow-200 px-1 rounded;
      }
    }
  </style>
</head>

<body class="font-inter bg-gray-50 text-dark min-h-screen flex flex-col">
  <!-- 顶部导航栏 -->
  <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 py-4 flex justify-between items-center">
      <!-- Logo区域 -->
      <a href="index.html" class="flex items-center space-x-2">
        <i class="fa fa-compass text-primary text-2xl"></i>
        <h1 class="text-xl md:text-2xl font-bold text-primary">资源导航</h1>
      </a>
      
      <!-- 桌面端导航 -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="index.html" class="text-dark hover:text-primary transition-colors">首页</a>
        <a href="free/" class="text-muted hover:text-primary transition-colors">资源分类</a>
        <a href="sitemap.html" class="text-primary font-medium">网站地图</a>
        <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="text-muted hover:text-primary transition-colors flex items-center">
          <i class="fa fa-github mr-1"></i> 提交资源
        </a>
      </div>
      
      <!-- 移动端菜单按钮 -->
      <button class="md:hidden text-dark focus:outline-none" id="menuBtn">
        <i class="fa fa-bars text-xl"></i>
      </button>
    </div>
    
    <!-- 移动端导航菜单 -->
    <div class="md:hidden hidden bg-white border-t border-gray-100" id="mobileMenu">
      <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
        <a href="index.html" class="py-2 text-dark hover:text-primary transition-colors">首页</a>
        <a href="free/" class="py-2 text-muted hover:text-primary transition-colors">资源分类</a>
        <a href="sitemap.html" class="py-2 text-primary font-medium">网站地图</a>
        <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="py-2 text-muted hover:text-primary transition-colors flex items-center">
          <i class="fa fa-github mr-1"></i> 提交资源
        </a>
      </div>
    </div>
  </header>

  <!-- 页面标题区 -->
  <section class="bg-gradient-to-r from-primary/90 to-primary text-white py-12 md:py-16">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-4 text-balance">网站地图</h1>
      <p class="text-white/90 max-w-3xl mx-auto text-lg text-balance">
        完整的开发者资源导航结构图，包含所有分类、服务和工具，帮助您快速找到所需的免费开发资源
      </p>
      
      <!-- 统计信息 -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mt-8 max-w-4xl mx-auto">
        <div class="bg-white/15 backdrop-blur-sm rounded-lg p-4">
          <p class="text-white/80 text-sm">总分类数</p>
          <p class="text-3xl font-bold" id="totalCategories">-</p>
        </div>
        <div class="bg-white/15 backdrop-blur-sm rounded-lg p-4">
          <p class="text-white/80 text-sm">总服务数</p>
          <p class="text-3xl font-bold" id="totalServices">-</p>
        </div>
        <div class="bg-white/15 backdrop-blur-sm rounded-lg p-4">
          <p class="text-white/80 text-sm">免费服务</p>
          <p class="text-3xl font-bold" id="freeServices">-</p>
        </div>
        <div class="bg-white/15 backdrop-blur-sm rounded-lg p-4">
          <p class="text-white/80 text-sm">开源服务</p>
          <p class="text-3xl font-bold" id="openSourceServices">-</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 面包屑导航 -->
  <div class="container mx-auto px-4 py-4 bg-white shadow-sm">
    <nav class="flex text-sm" aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-3">
        <li class="inline-flex items-center">
          <a href="index.html" class="inline-flex items-center text-muted hover:text-primary transition-colors">
            <i class="fa fa-home mr-2"></i>首页
          </a>
        </li>
        <li aria-current="page">
          <div class="flex items-center">
            <i class="fa fa-chevron-right text-muted mx-2 text-xs"></i>
            <span class="text-primary font-medium">网站地图</span>
          </div>
        </li>
      </ol>
    </nav>
  </div>

  <!-- 搜索和筛选工具栏 -->
  <div class="container mx-auto px-4 py-6">
    <div class="bg-white rounded-xl border border-gray-100 p-6 shadow-sm">
      <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
        <div class="flex-1 max-w-2xl">
          <div class="relative">
            <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-muted"></i>
            <input 
              type="text" 
              id="searchInput"
              placeholder="搜索分类、服务或标签..." 
              class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"
            >
          </div>
        </div>
        
        <div class="flex flex-wrap gap-2">
          <button class="filter-btn bg-primary text-white px-4 py-2 rounded-lg text-sm transition-colors" data-filter="all">
            <i class="fa fa-th mr-1"></i> 全部
          </button>
          <button class="filter-btn bg-light hover:bg-gray-200 px-4 py-2 rounded-lg text-sm transition-colors" data-filter="free">
            <i class="fa fa-check-circle mr-1"></i> 免费服务
          </button>
          <button class="filter-btn bg-light hover:bg-gray-200 px-4 py-2 rounded-lg text-sm transition-colors" data-filter="open-source">
            <i class="fa fa-code-fork mr-1"></i> 开源服务
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 核心内容区 -->
  <main class="container mx-auto px-4 py-8 flex-grow">
    <!-- 分类网格 -->
    <div id="categoriesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- 分类卡片将通过JavaScript动态生成 -->
    </div>
    
    <!-- 加载状态 -->
    <div id="loadingState" class="text-center py-12">
      <div class="inline-flex items-center space-x-2 text-muted">
        <i class="fa fa-spinner fa-spin"></i>
        <span>正在加载网站地图数据...</span>
      </div>
    </div>
    
    <!-- 无结果状态 -->
    <div id="noResultsState" class="hidden text-center py-12">
      <div class="text-muted">
        <i class="fa fa-search text-4xl mb-4"></i>
        <p class="text-lg">未找到匹配的结果</p>
        <p class="text-sm mt-2">请尝试其他搜索关键词或筛选条件</p>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-dark text-white py-10 mt-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- 品牌信息 -->
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <i class="fa fa-compass text-secondary text-2xl"></i>
            <h3 class="text-xl font-bold">资源导航</h3>
          </div>
          <p class="text-gray-400 mb-4">
            为开发者提供精选免费资源导航，覆盖域名、服务器、API、工具等全品类需求，助力项目开发与创新
          </p>
          <div class="flex space-x-4">
            <a href="https://github.com/guomengtao/rinuo.com" target="_blank" class="text-gray-400 hover:text-secondary transition-colors">
              <i class="fa fa-github text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-secondary transition-colors">
              <i class="fa fa-twitter text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-secondary transition-colors">
              <i class="fa fa-linkedin text-xl"></i>
            </a>
          </div>
        </div>
        
        <!-- 快速链接 -->
        <div>
          <h4 class="text-lg font-medium mb-4">快速链接</h4>
          <ul class="space-y-2">
            <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors">首页</a></li>
            <li><a href="free/" class="text-gray-400 hover:text-white transition-colors">资源分类</a></li>
            <li><a href="sitemap.html" class="text-white font-medium">网站地图</a></li>
            <li>
              <a href="https://github.com/guomengtao/rinuo.com/issues" target="_blank" class="text-gray-400 hover:text-white transition-colors flex items-center">
                <i class="fa fa-github mr-1"></i> 提交资源
              </a>
            </li>
          </ul>
        </div>
        
        <!-- 订阅更新 -->
        <div>
          <h4 class="text-lg font-medium mb-4">订阅资源更新</h4>
          <p class="text-gray-400 mb-4">获取最新免费资源信息和使用教程</p>
          <form class="flex flex-col sm:flex-row gap-2">
            <input type="email" placeholder="输入你的邮箱" class="flex-grow px-4 py-2 rounded-lg focus:outline-none text-dark" required>
            <button type="submit" class="bg-secondary hover:bg-secondary/90 text-white px-4 py-2 rounded-lg transition-colors whitespace-nowrap">
              立即订阅
            </button>
          </form>
        </div>
      </div>
      
      <!-- 版权信息 -->
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500 text-sm">
        <p>© 2025 开发者资源导航 | 本站资源仅供学习使用，版权归原作者所有</p>
        <p class="mt-2">本页面最后更新时间：<span id="lastUpdated">加载中...</span></p>
      </div>
    </div>
  </footer>

  <!-- 回到顶部按钮 -->
  <button id="backToTop" class="fixed bottom-6 right-6 bg-primary hover:bg-primary/90 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 opacity-0 invisible">
    <i class="fa fa-chevron-up"></i>
  </button>

  <!-- JavaScript 功能 -->
  <script>
    // 全局变量
    let allCategories = [];
    let allServices = [];
    let currentFilter = 'all';
    let searchQuery = '';

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', function() {
      loadSitemapData();
      initializeEventListeners();
    });

    // 初始化事件监听器
    function initializeEventListeners() {
      // 搜索输入
      const searchInput = document.getElementById('searchInput');
      searchInput.addEventListener('input', debounce(handleSearch, 300));

      // 筛选按钮
      const filterBtns = document.querySelectorAll('.filter-btn');
      filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const filter = this.getAttribute('data-filter');
          setActiveFilter(filter);
          applyFilters();
        });
      });

      // 移动端菜单
      const menuBtn = document.getElementById('menuBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      menuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });

      // 回到顶部
      const backToTopBtn = document.getElementById('backToTop');
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backToTopBtn.classList.remove('opacity-0', 'invisible');
          backToTopBtn.classList.add('opacity-100', 'visible');
        } else {
          backToTopBtn.classList.add('opacity-0', 'invisible');
          backToTopBtn.classList.remove('opacity-100', 'visible');
        }
      });

      backToTopBtn.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    }

    // 加载网站地图数据
    async function loadSitemapData() {
      try {
        const response = await fetch('assets/data/summary.json');
        const data = await response.json();
        
        allCategories = data.categories || [];
        allServices = data.services || [];
        
        // 更新统计信息
        updateStatistics(data);
        
        // 渲染分类网格
        renderCategoriesGrid();
        
        // 隐藏加载状态
        document.getElementById('loadingState').style.display = 'none';
        
      } catch (error) {
        console.error('加载网站地图数据失败:', error);
        document.getElementById('loadingState').innerHTML = `
          <div class="text-red-500">
            <i class="fa fa-exclamation-triangle text-4xl mb-4"></i>
            <p class="text-lg">加载失败</p>
            <p class="text-sm mt-2">请检查网络连接或稍后重试</p>
          </div>
        `;
      }
    }

    // 更新统计信息
    function updateStatistics(data) {
      document.getElementById('totalCategories').textContent = data.totalCategories || 0;
      document.getElementById('totalServices').textContent = data.totalServices || 0;
      document.getElementById('freeServices').textContent = data.searchIndex?.byFreeStatus?.free?.length || 0;
      document.getElementById('openSourceServices').textContent = data.searchIndex?.byOpenSource?.openSource?.length || 0;
      document.getElementById('lastUpdated').textContent = data.updatedAt || '未知';
    }

    // 渲染分类网格
    function renderCategoriesGrid() {
      const grid = document.getElementById('categoriesGrid');
      const filteredCategories = getFilteredCategories();
      
      if (filteredCategories.length === 0) {
        showNoResults();
        return;
      }

      grid.innerHTML = filteredCategories.map(category => createCategoryCard(category)).join('');
      hideNoResults();
    }

    // 创建分类卡片
    function createCategoryCard(category) {
      const services = getServicesByCategory(category.category);
      const filteredServices = filterServices(services);
      
      return `
        <div class="category-card">
          <div class="flex items-center justify-between mb-4">
            <div>
              <h3 class="text-xl font-bold text-dark mb-1">${category.categoryName || category.category}</h3>
              <p class="text-muted text-sm">${category.category} • ${category.serviceCount} 个服务</p>
            </div>
            <div class="text-right">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary">
                ${category.serviceCount}
              </span>
            </div>
          </div>
          
          <div class="space-y-2 mb-4">
            ${filteredServices.slice(0, 5).map(service => createServiceItem(service)).join('')}
            ${filteredServices.length > 5 ? `<p class="text-muted text-sm text-center">... 还有 ${filteredServices.length - 5} 个服务</p>` : ''}
          </div>
          
          <div class="flex justify-between items-center">
            <a href="free/${category.slug}.html" class="text-primary hover:underline text-sm flex items-center">
              <i class="fa fa-external-link mr-1"></i> 查看详情
            </a>
            <span class="text-xs text-muted">更新于 ${category.updatedAt || '未知'}</span>
          </div>
        </div>
      `;
    }

    // 创建服务项
    function createServiceItem(service) {
      const title = highlightSearchQuery(service.title);
      const tags = service.tags ? service.tags.slice(0, 2).map(tag => 
        `<span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">${tag}</span>`
      ).join('') : '';
      
      const statusIcons = [];
      if (service.isFree) statusIcons.push('<i class="fa fa-check-circle text-success" title="免费服务"></i>');
      if (service.isOpenSource) statusIcons.push('<i class="fa fa-code-fork text-info" title="开源服务"></i>');
      
      return `
        <div class="service-item">
          <div class="flex-1 min-w-0">
            <div class="flex items-center space-x-2">
              <a href="${service.url}" target="_blank" class="font-medium text-dark hover:text-primary transition-colors truncate">
                ${title}
              </a>
              <div class="flex items-center space-x-1">
                ${statusIcons.join('')}
              </div>
            </div>
            ${service.description ? `<p class="text-muted text-xs mt-1 truncate">${service.description}</p>` : ''}
            ${tags ? `<div class="flex space-x-1 mt-1">${tags}</div>` : ''}
          </div>
        </div>
      `;
    }

    // 获取分类下的服务
    function getServicesByCategory(category) {
      return allServices.filter(service => service.category === category);
    }

    // 筛选分类
    function getFilteredCategories() {
      if (searchQuery) {
        return allCategories.filter(category => 
          category.categoryName?.toLowerCase().includes(searchQuery.toLowerCase()) ||
          category.category.toLowerCase().includes(searchQuery.toLowerCase())
        );
      }
      return allCategories;
    }

    // 筛选服务
    function filterServices(services) {
      let filtered = services;
      
      if (currentFilter === 'free') {
        filtered = filtered.filter(service => service.isFree);
      } else if (currentFilter === 'open-source') {
        filtered = filtered.filter(service => service.isOpenSource);
      }
      
      if (searchQuery) {
        filtered = filtered.filter(service => 
          service.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
          service.description?.toLowerCase().includes(searchQuery.toLowerCase()) ||
          service.tags?.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))
        );
      }
      
      return filtered;
    }

    // 处理搜索
    function handleSearch(event) {
      searchQuery = event.target.value.trim();
      applyFilters();
    }

    // 设置活动筛选器
    function setActiveFilter(filter) {
      currentFilter = filter;
      
      // 更新按钮状态
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('bg-primary', 'text-white');
        btn.classList.add('bg-light', 'hover:bg-gray-200');
      });
      
      const activeBtn = document.querySelector(`[data-filter="${filter}"]`);
      if (activeBtn) {
        activeBtn.classList.remove('bg-light', 'hover:bg-gray-200');
        activeBtn.classList.add('bg-primary', 'text-white');
      }
    }

    // 应用筛选器
    function applyFilters() {
      renderCategoriesGrid();
    }

    // 显示无结果状态
    function showNoResults() {
      document.getElementById('noResultsState').classList.remove('hidden');
      document.getElementById('categoriesGrid').innerHTML = '';
    }

    // 隐藏无结果状态
    function hideNoResults() {
      document.getElementById('noResultsState').classList.add('hidden');
    }

    // 高亮搜索查询
    function highlightSearchQuery(text) {
      if (!searchQuery) return text;
      const regex = new RegExp(`(${searchQuery})`, 'gi');
      return text.replace(regex, '<span class="search-highlight">$1</span>');
    }

    // 防抖函数
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
  </script>
</body>
</html>
