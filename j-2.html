<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Japanese Learning Cards</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
  @apply bg-gradient-to-br from-gray-900 via-purple-800 to-indigo-900 min-h-screen font-sans text-white;
}

.container {
  @apply mx-auto px-6 py-10;
}

header h1 {
  @apply text-5xl font-extrabold text-yellow-400 mb-2 text-center;
}

header p {
  @apply text-gray-300 text-lg text-center;
}

.category {
  @apply text-3xl font-bold text-indigo-300 mt-12 mb-6 border-b-2 border-indigo-500 pb-2;
}

.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 24px;
}

.card {
  @apply flex flex-col items-center justify-center backdrop-blur-md bg-white/10 rounded-3xl shadow-2xl cursor-pointer transition-transform duration-300 ease-in-out p-6;
  border: 1px solid rgba(255,255,255,0.2);
}

.card:hover {
  @apply scale-105 shadow-3xl;
}

.emoji {
  font-size: 180px;
  line-height: 1;
  margin-bottom: 16px;
  text-shadow: 3px 3px 10px rgba(0,0,0,0.4);
  transition: transform 0.3s ease;
}

.word {
  text-align: center;
}

.word-kanji {
  @apply text-2xl font-bold text-yellow-300;
}

.word-hiragana {
  @apply text-lg text-gray-200 mt-1;
}

.word-katakana {
  @apply text-lg text-indigo-200 mt-1;
}

/* 点击动画仅作用于 emoji */
@keyframes emoji-bounce {
  0%   { transform: scale(1); }
  30%  { transform: scale(1.2); }
  50%  { transform: scale(0.9); }
  70%  { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.emoji.clicked {
  animation: emoji-bounce 0.4s ease;
}
</style>
</head>
<body>
<div class="container">
  <header class="mb-8">
    <h1>Japanese Learning Cards</h1>
    <p>Click a card to hear pronunciation</p>
  </header>

  <div id="cardsContainer"></div>
</div>

<script>
// 异步加载 JSON 数据
async function loadCategories() {
  try {
    const response = await fetch('categories.json'); // JSON 文件路径
    const categories = await response.json();
    renderCards(categories);
  } catch (err) {
    console.error("Failed to load categories.json:", err);
  }
}

function renderCards(categories) {
  const container = document.getElementById('cardsContainer');

  for (const [category, items] of Object.entries(categories)) {
    const catTitle = document.createElement('div');
    catTitle.className = "category";
    catTitle.textContent = category;
    container.appendChild(catTitle);

    const grid = document.createElement('div');
    grid.className = "cards-grid";
    container.appendChild(grid);

    items.forEach(item => {
      const card = document.createElement('div');
      card.className = "card";

      const emoji = document.createElement('div');
      emoji.className = "emoji";
      emoji.textContent = item.emoji || '❓';
      card.appendChild(emoji);

      const word = document.createElement('div');
      word.className = "word";

      const kanji = document.createElement('div');
      kanji.className = "word-kanji";
      kanji.textContent = item.kanji || '';

      const hiragana = document.createElement('div');
      hiragana.className = "word-hiragana";
      hiragana.textContent = item.hiragana || '';

      const katakana = document.createElement('div');
      katakana.className = "word-katakana";
      katakana.textContent = item.katakana || '';

      word.appendChild(kanji);
      word.appendChild(hiragana);
      word.appendChild(katakana);

      card.appendChild(word);

      // 点击发音 & emoji 弹跳效果
      card.addEventListener('click', () => {
        // 发音
        const utter = new SpeechSynthesisUtterance(item.kanji || item.hiragana || '');
        utter.lang = 'ja-JP';
        speechSynthesis.speak(utter);

        // emoji 弹跳
        emoji.classList.remove('clicked');
        void emoji.offsetWidth;
        emoji.classList.add('clicked');
      });

      grid.appendChild(card);
    });
  }
}

// 页面加载后执行
loadCategories();
</script>
</body>
</html>
